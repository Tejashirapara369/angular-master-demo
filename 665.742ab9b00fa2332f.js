"use strict";(self.webpackChunkarray_form_demo=self.webpackChunkarray_form_demo||[]).push([[665],{9665:(C,c,u)=>{u.r(c),u.d(c,{NestedFormArrayModule:()=>F});var m=u(6895),r=u(433);function p(){return o=>{const i=o.value;return console.log("value ==>",i),!i||/[A-D]+/.test(i)&&1===i.length?null:{notValid:!0}}}var e=u(1571);function f(o,i){if(1&o&&(e.TgZ(0,"div",15),e._UZ(1,"input",16),e.TgZ(2,"label",17),e._uU(3),e.qZA()()),2&o){const t=i.$implicit;e.xp6(1),e.Q6J("value",t.value),e.xp6(2),e.hij(" ",t.text," ")}}function h(o,i){if(1&o&&(e.TgZ(0,"div",13),e.YNc(1,f,4,2,"div",14),e.qZA()),2&o){const t=e.oxw().index,n=e.oxw();e.xp6(1),e.Q6J("ngForOf",n.questionList[t].options)}}function g(o,i){1&o&&e._UZ(0,"textarea",18)}function v(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",7)(1,"div",8)(2,"p",9)(3,"strong"),e._uU(4),e.qZA(),e._uU(5),e.qZA(),e.YNc(6,h,2,1,"div",10),e.YNc(7,g,1,0,"ng-template",null,11,e.W1O),e.TgZ(9,"p",12),e.NdJ("click",function(){const a=e.CHM(t).index,l=e.oxw();return e.KtG(l.checkAnswer(a))}),e._uU(10),e.qZA()()()}if(2&o){const t=i.index,n=e.MAs(8),s=e.oxw();e.xp6(1),e.Q6J("formGroupName",t),e.xp6(3),e.hij("",t+1,")\xa0\xa0\xa0"),e.xp6(1),e.hij(" ",s.questionList[t].question,""),e.xp6(1),e.Q6J("ngIf","MCQ"===s.questionList[t].questionType)("ngIfElse",n),e.xp6(4),e.hij(" ",s.verifyAnswerIndex===t?s.result:"Verify your Answer"," ")}}function A(o,i){1&o&&(e.TgZ(0,"div",31)(1,"div",32),e._UZ(2,"input",33),e.qZA(),e.TgZ(3,"div",34),e._UZ(4,"input",35),e.qZA()()),2&o&&e.Q6J("formGroupName",i.index)}function _(o,i){if(1&o&&(e.TgZ(0,"div",29),e._uU(1," Add options value: "),e.YNc(2,A,5,1,"div",30),e.qZA()),2&o){const t=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",t.optionsArray.controls)}}function w(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",19)(1,"h3"),e._uU(2,"Add new question"),e.qZA(),e.TgZ(3,"form",4)(4,"div",20)(5,"label",21),e._uU(6,"Question"),e.qZA(),e._UZ(7,"input",22),e.qZA(),e.TgZ(8,"div",20),e._uU(9," Question type: "),e.TgZ(10,"div",15),e._UZ(11,"input",23),e.TgZ(12,"label",17),e._uU(13," MCQ type question "),e.qZA()(),e.TgZ(14,"div",15),e._UZ(15,"input",24),e.TgZ(16,"label",17),e._uU(17," Descriptive question "),e.qZA()()(),e.YNc(18,_,3,1,"div",25),e.TgZ(19,"div",26),e._uU(20),e._UZ(21,"input",27),e.qZA(),e.TgZ(22,"button",28),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.addQuestion())}),e._uU(23,"Add question"),e.qZA()()()}if(2&o){const t=e.oxw();let n,s;e.xp6(3),e.Q6J("formGroup",t.newQuestionForm),e.xp6(15),e.Q6J("ngIf","MCQ"===(null==(n=t.newQuestionForm.get("questionType"))?null:n.value)),e.xp6(2),e.hij(" Enter right answer ","BRIEF"===(null==(s=t.newQuestionForm.get("questionType"))?null:s.value)?"(add keywords separated by commas)":"(Accepted value: A/B/C/D)",": "),e.xp6(2),e.Q6J("disabled",t.newQuestionForm.invalid)}}let q=(()=>{class o{constructor(t){this.fb=t,this.showAddQuestionForm=!1,this.questionList=[{question:"National animal of india?",questionType:"MCQ",options:[{value:"A",text:"Tiger"},{value:"B",text:"Lion"},{value:"C",text:"Cow"},{value:"D",text:"Deer"}],rightAnswer:"A"},{question:"National sport of india?",questionType:"MCQ",options:[{value:"A",text:"Kabbadi"},{value:"B",text:"Cricket"},{value:"C",text:"Hockey"},{value:"D",text:"Football"}],rightAnswer:"C"},{question:"Something write about your self",questionType:"BRIEF",rightAnswer:["name","my","study","is"]}],this.optionsFormArray=this.fb.array([this.fb.group({value:[{value:"A",disabled:!0}],text:["",r.kI.required]}),this.fb.group({value:[{value:"B",disabled:!0}],text:["",r.kI.required]}),this.fb.group({value:[{value:"C",disabled:!0}],text:["",r.kI.required]}),this.fb.group({value:[{value:"D",disabled:!0}],text:["",r.kI.required]})]),this.newQuestionForm=this.fb.group({question:["",r.kI.required],questionType:["MCQ"],options:this.optionsFormArray,rightAnswer:["",[r.kI.required,p()]]}),this.questionForm=this.fb.group({questions:this.fb.array([])})}get questionArray(){return this.questionForm.get("questions")}get optionsArray(){return this.newQuestionForm.get("options")}ngOnInit(){this.questionList.forEach(t=>this.addQuestionControl()),this.newQuestionForm.get("questionType")?.valueChanges.subscribe(t=>{this.newQuestionForm.get("rightAnswer")?.clearValidators(),"MCQ"===t?(this.newQuestionForm.addControl("options",this.optionsFormArray),this.newQuestionForm.get("rightAnswer")?.addValidators(p())):this.newQuestionForm.removeControl("options"),this.newQuestionForm.get("rightAnswer")?.addValidators([r.kI.required]),this.newQuestionForm.get("rightAnswer")?.updateValueAndValidity()})}addQuestionControl(){const t=this.fb.group({answer:["",r.kI.required]});this.questionArray.push(t)}addQuestion(){const t=this.newQuestionForm.getRawValue();this.addQuestionControl(),"BRIEF"===t.questionType&&(t.rightAnswer=t.rightAnswer.split(",")),console.log("question ==>",t),this.questionList.push(t),this.newQuestionForm.reset({questionType:"MCQ"}),this.optionsFormArray.reset([{value:"A",text:""},{value:"B",text:""},{value:"C",text:""},{value:"D",text:""}])}checkAnswer(t){this.verifyAnswerIndex!==t&&(this.verifyAnswer(t),this.subscription&&this.subscription.unsubscribe(),this.subscription=this.questionArray.at(t).valueChanges.subscribe(n=>{n&&this.verifyAnswer(t)}))}verifyAnswer(t){this.verifyAnswerIndex=t;const n=this.questionList[t],s=this.questionArray.at(t).value;if("MCQ"===n.questionType)this.result=s.answer===n.rightAnswer?"Correct Answer":"Wrong Answer";else{const a=n.rightAnswer;let l=0;a.forEach(x=>{s.answer.includes(x)&&l++});const d=100*l/a.length;this.result=d<33?"Wrong Answer":d.toFixed(2)+"% correct"}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(r.QS))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-question-form"]],decls:8,vars:3,consts:[[1,"container"],[1,"row"],[1,"col-md-6"],[1,"btn","btn-light","m-3",3,"click"],[3,"formGroup"],["class","md-6","formArrayName","questions",4,"ngFor","ngForOf"],["class","col-md-6 p-5",4,"ngIf"],["formArrayName","questions",1,"md-6"],[1,"form-group",3,"formGroupName"],[1,"pt-5","mb-0"],["class","mx-3",4,"ngIf","ngIfElse"],["briefQuestion",""],["href","javascript:void(0)",1,"float-end","verify-answer",3,"click"],[1,"mx-3"],["class","form-check",4,"ngFor","ngForOf"],[1,"form-check"],["type","radio","formControlName","answer",1,"form-check-input",3,"value"],[1,"form-check-label"],["cols","30","rows","3","formControlName","answer",1,"form-control"],[1,"col-md-6","p-5"],[1,"form-group","mb-3"],["for","newQuestion"],["id","newQuestion","type","text","formControlName","question","placeholder","Please enter question here",1,"form-control"],["type","radio","value","MCQ","formControlName","questionType",1,"form-check-input"],["type","radio","value","BRIEF","formControlName","questionType",1,"form-check-input"],["formArrayName","options",4,"ngIf"],[1,"form-group"],["type","text","formControlName","rightAnswer",1,"form-control"],[1,"btn","btn-success","m-3",3,"disabled","click"],["formArrayName","options"],["class","row mb-3",3,"formGroupName",4,"ngFor","ngForOf"],[1,"row","mb-3",3,"formGroupName"],[1,"col-md-2"],["type","text","formControlName","value",1,"form-control"],[1,"col-md-8"],["type","text","formControlName","text",1,"form-control"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),e.NdJ("click",function(){return n.showAddQuestionForm=!n.showAddQuestionForm}),e._uU(4," Add new question "),e.qZA(),e.TgZ(5,"form",4),e.YNc(6,v,11,6,"div",5),e.qZA()(),e.YNc(7,w,24,4,"div",6),e.qZA()()),2&t&&(e.xp6(5),e.Q6J("formGroup",n.questionForm),e.xp6(1),e.Q6J("ngForOf",n.questionArray.controls),e.xp6(1),e.Q6J("ngIf",n.showAddQuestionForm))},dependencies:[m.sg,m.O5,r._Y,r.Fj,r._,r.JJ,r.JL,r.sg,r.u,r.x0,r.CE],styles:[".option-lable[_ngcontent-%COMP%]{margin:0 50px 0 10px}.verify-answer[_ngcontent-%COMP%]{cursor:pointer}"]}),o})();var y=u(1587);const Q=[{path:"",component:q,pathMatch:"full"}];let F=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[m.ez,r.UX,y.Bz.forChild(Q)]}),o})()}}]);